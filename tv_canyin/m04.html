<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>餐饮美食</title>
    <link href="css/m.base.css" rel="stylesheet" type="text/css">
    <link href="css/cyms_style.css" rel="stylesheet" type="text/css">
    <script src="http://libs.baidu.com/jquery/1.11.1/jquery.min.js" type="text/javascript"></script>
    <script language="javascript">
        //键盘操作
        var foc = 1;
        var bought = 1;
        var cart = 1;

        $(document).keydown(function (event) {
            switch (event.keyCode) {
                case 13:  //回车
                    if(foc == 2){
                        GetCartEnter(cart);
                    }

                    break;

                case 37: //←
                    if(foc == 1){
                        bought--;
                        FocusBought(bought);
                    }
                    if(foc == 2){
                        cart--;
                        FocusCart(cart);
                    }
                    break;

                case 38: //↑

                    break;

                case 39: //→
                    if(foc == 1){
                        bought++;
                        FocusBought(bought);
                    }
                    if(foc == 2){
                        cart++;
                        FocusCart(cart);
                    }
                    break;

                case 40: //↓
                    if(foc == 1){
                        cartok = 0; //判断是否第一次
                        FocusCart(cart);
                    }

                    break;

            }
            return false;
        });


        function FocusBought(bou) {      //顶部购买
            foc = 1;
            if (bought < 1) { //不可低于0
                bought = 1
            }
            if (bought > 1) { //不可超过最大
                bought = 1
            }

            $(".bought_menu li").removeClass("bought_menu_over");
            $("#bou" + bought).addClass("bought_menu_over");

        }

        function FocusCart(cat) {      //顶部购买
            foc = 2;
            if (cart < 1) { //不可低于0
                cart = 1
            }
            if (cart > 14) { //不可超过最大
//                cart = 14;
                set = 1;
                $(".sumbox i ,.sumbox div ,.subtotal div").removeClass("over");
                $("#set" + set).addClass("over");
            }

            // 翻页
            var gbt = cat;
            var ab = $(".cart_content li").outerHeight(true);
            if ( gbt > 7) {
                $(".cart_content_area").css("top",-ab);
            }else{
                $(".cart_content_area").css("top","0");
            }

            $(".sumbox i ,.sumbox div ,.subtotal div").removeClass("over");
            $("#cart" + cart).addClass("over");

        }

        function GetCartEnter(ce){
            if(ce == 1){
                numDec();
            }
            if(ce == 2){
                numAdd();
            }

        }

        var single = 22.50;  //商品单价
        $(document).ready(function(){  //初始赋值价格
            $("#totalPrice").html(single.toFixed(2));
        });

        /*商品数量+1*/
        function numAdd(){
            var num_add = parseInt($("#sumbox_num").val()) + 1;
            if($("#sumbox_num").val()==""){
                num_add = 1;
            }
            $("#sumbox_num").val(num_add);
            var total = single * num_add;
            $("#totalPrice").html(total.toFixed(2));
        }

        /*商品数量-1*/
        function numDec() {
            var num_dec = parseInt($("#sumbox_num").val()) - 1;
            if (num_dec < 1) {
                //购买数量必须大于或等于1
                alert("必须大于 1 份");
            } else {
                $("#sumbox_num").val(num_dec);
                var total = single * num_dec;
                $("#totalPrice").html(total.toFixed(2));
            }
        }


    </script>
</head>
<body>
<div class="main">

    <div class="top_header">
        <div class="ms_class fl"><img src="img/y_class2.png"/> </div>
        <div class="ms_title fl">购物车</div>

        <div class="bought_menu">
            <li id="bou1" class="bought_menu_over"><img src="img/g_03.png" /></li>
        </div>

    </div>



    <div class="cart_content">
        <div class="cart_content_area">
            <li>
                <div class="heading">1索菲亚大酒店</div>
                <div class="cart_line">
                    <img src="img/c_pic.jpg">
                    <div class="title">辣子侗家腌鱼</div>
                    <div class="price">￥<i id="totalPrice">22.50</i></div>
                    <div class="sumbox">
                        <i id="cart1">-</i>
                        <input type="text" name="sumbox_num" id="sumbox_num" value="1" minnum="1">
                        <i id="cart2">+</i>
                        <div id="cart3" class="btn">删除</div>
                    </div>
                </div>

                <div class="cart_line">
                    <img src="img/c_pic.jpg">
                    <div class="title">辣子侗家腌鱼</div>
                    <div class="price">￥<i id="totalPrice">22.50</i></div>
                    <div class="sumbox">
                        <i id="cart4">-</i>
                        <input type="text" name="sumbox_num" id="sumbox_num" value="1" minnum="1">
                        <i id="cart5">+</i>
                        <div id="cart6" class="btn">删除</div>
                    </div>
                </div>

                <div class="subtotal">
                    <div class="word"><span>*还差15元起送</span>请您继续点餐。</div>
                    <div id="cart7" class="btn">点餐</div>
                </div>
            </li>

            <li>
                <div class="heading">2索菲亚大酒店</div>
                <div class="cart_line">
                    <img src="img/c_pic.jpg">
                    <div class="title">辣子侗家腌鱼</div>
                    <div class="price">￥<i id="totalPrice">22.50</i></div>
                    <div class="sumbox">
                        <i id="cart8">-</i>
                        <input type="text" name="sumbox_num" id="sumbox_num" value="1" minnum="1">
                        <i id="cart9">+</i>
                        <div id="cart10" class="btn">删除</div>
                    </div>
                </div>

                <div class="cart_line">
                    <img src="img/c_pic.jpg">
                    <div class="title">辣子侗家腌鱼</div>
                    <div class="price">￥<i id="totalPrice">22.50</i></div>
                    <div class="sumbox">
                        <i id="cart11">-</i>
                        <input type="text" name="sumbox_num" id="sumbox_num" value="1" minnum="1">
                        <i id="cart12">+</i>
                        <div id="cart13" class="btn">删除</div>
                    </div>
                </div>

                <div class="subtotal">
                    <div class="word"><span>还差15元起送</span>请您继续点餐。</div>
                    <div id="cart14" class="btn">点餐</div>
                </div>
            </li>

        </div>
    </div>

    <div class="settlement">
        <div class="price">合计：￥<i id="totalPrice">222.50</i></div>
        <div  id="set1" class="btn">去结算</div>
    </div>

</div>

</body>
</html>